@model TechZone.Web.ViewModels.Shop.ProductDetailsViewModel

@{
    ViewData["Title"] = Model.Name;
}

<div class="shop-container mt-5">

    <div class="mb-4">
        <a asp-controller="Shop" asp-action="Index" class="btn btn-outline-secondary btn-sm">
            <i class="fas fa-arrow-left"></i> Обратно към магазина
        </a>
    </div>

    <div class="row">
        <div class="col-lg-5 mb-4">
            <div class="product-image-card">
                <img src="@Model.ImageUrl" class="img-fluid product-main-image" alt="@Model.Name">
            </div>
        </div>

        <div class="col-lg-7">
            <div class="product-info-header">
                <span class="product-brand-badge">@Model.Brand</span>
                <span class="product-category-badge">@Model.Category</span>
            </div>

            <h1 class="product-title">@Model.Name</h1>

            <div class="product-meta d-flex align-items-center gap-3 mb-3">
                <div class="status-badge">
                    @if (Model.IsAvailable)
                    {
                        <span class="badge badge-success px-3 py-2"><i class="fas fa-check-circle"></i> Наличен</span>
                    }
                    else
                    {
                        <span class="badge badge-danger px-3 py-2"><i class="fas fa-times-circle"></i> Изчерпан</span>
                    }
                </div>
                <div class="product-id text-muted">
                    <small>Product ID: #@Model.Id</small>
                </div>
            </div>

            <h2 class="product-price">@Model.Price.ToString("C")</h2>

            <div class="product-description text-muted mb-4">
                @Model.Description
            </div>

            <hr class="border-secondary my-4">

            <div class="action-buttons d-flex flex-wrap gap-3 mb-5">
                @if (Model.IsAvailable)
                {
                    <a asp-controller="Cart" asp-action="Add"
                       asp-route-productId="@Model.Id"
                       asp-route-returnUrl="@Context.Request.Path"
                       class="btn btn-tech btn-lg px-5 flex-grow-1">
                        <i class="fas fa-shopping-cart me-2"></i> ДОБАВИ В КОЛИЧКА
                    </a>
                }
                else
                {
                    <button class="btn btn-secondary btn-lg px-5 flex-grow-1" disabled>
                        <i class="fas fa-ban me-2"></i> ИЗЧЕРПАН
                    </button>
                }

                <a asp-controller="Wishlist" asp-action="Add"
                   asp-route-productId="@Model.Id"
                   asp-route-returnUrl="@Context.Request.Path"
                   class="btn btn-outline-light btn-lg px-4" title="Добави в любими">
                    <i class="far fa-heart"></i>
                </a>
            </div>

            <div class="specs-card">
                <div class="specs-header">
                    <h5 class="mb-0"><i class="fas fa-microchip me-2"></i> Технически Характеристики</h5>
                </div>
                <div class="specs-body">
                    @if (Model.Specifications.Any())
                    {
                        <table class="table table-dark table-striped table-hover mb-0 specs-table">
                            <tbody>
                                @foreach (var spec in Model.Specifications)
                                {
                                    <tr>
                                        <th scope="row">@spec.Key</th>
                                        <td>@spec.Value</td>
                                    </tr>
                                }
                                <tr>
                                    <th scope="row">Гаранция</th>
                                    <td>24 Месеца</td>
                                </tr>
                            </tbody>
                        </table>
                    }
                    else
                    {
                        <div class="p-4 text-center text-muted">
                            Няма въведени специфични характеристики за този продукт.
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>