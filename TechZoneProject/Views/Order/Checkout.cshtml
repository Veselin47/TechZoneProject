@model TechZone.Web.ViewModels.Order.CheckoutViewModel

@{
    ViewData["Title"] = "Завършване на поръчка";
}

<div class="shop-container mt-4">
    <div class="row">

        <div class="col-md-7 mb-4">
            <div class="card bg-dark border-secondary p-4">
                <h4 class="text-white mb-4 border-bottom border-secondary pb-2">
                    <i class="fas fa-shipping-fast text-success"></i> Данни за доставка
                </h4>

                <form method="post" asp-action="Checkout">
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label-custom">Име</label>
                            <input asp-for="FirstName" class="form-control-dark" placeholder="Иван" />
                            <span asp-validation-for="FirstName" class="text-danger small"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label-custom">Фамилия</label>
                            <input asp-for="LastName" class="form-control-dark" placeholder="Петров" />
                            <span asp-validation-for="LastName" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label-custom">Телефон</label>
                        <input asp-for="PhoneNumber" class="form-control-dark" placeholder="0888..." />
                        <span asp-validation-for="PhoneNumber" class="text-danger small"></span>
                    </div>

                    <div class="row">
                        <div class="col-md-8 mb-3">
                            <label class="form-label-custom">Град</label>
                            <input asp-for="City" class="form-control-dark" />
                            <span asp-validation-for="City" class="text-danger small"></span>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label-custom">Пощенски код</label>
                            <input asp-for="PostalCode" class="form-control-dark" />
                            <span asp-validation-for="PostalCode" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label-custom">Адрес за доставка</label>
                        <textarea asp-for="Address" class="form-control-dark" rows="2" placeholder="кв., ул., номер, блок..."></textarea>
                        <span asp-validation-for="Address" class="text-danger small"></span>
                    </div>

                    <div class="mb-4">
                        <label class="form-label-custom">Бележка към куриера (опционално)</label>
                        <textarea asp-for="OrderNote" class="form-control-dark" rows="2"></textarea>
                    </div>

                    <h4 class="text-white mb-3 mt-4 border-bottom border-secondary pb-2">
                        <i class="fas fa-wallet text-success"></i> Плащане
                    </h4>

                    <div class="form-check mb-4 p-3 border border-secondary rounded bg-dark">
                        <input class="form-check-input" type="radio" checked disabled>
                        <label class="form-check-label text-white ms-2">
                            <strong>Наложен платеж</strong> (Плащане в брой при доставка)
                        </label>
                    </div>

                    <button type="submit" class="btn btn-tech btn-lg w-100 py-3">
                        ЗАВЪРШИ ПОРЪЧКАТА <i class="fas fa-chevron-right ms-2"></i>
                    </button>
                </form>
            </div>
        </div>

        <div class="col-md-5">
            <div class="card bg-dark border-secondary p-4 sticky-top" style="top: 100px; z-index: 1;">
                <h4 class="text-white mb-4">Твоята поръчка</h4>

                <ul class="list-group list-group-flush mb-3">
                    @foreach (var item in Model.Items)
                    {
                        <li class="list-group-item bg-transparent text-white border-secondary d-flex justify-content-between lh-sm px-0 py-3">
                            <div class="d-flex align-items-center">
                                <img src="@item.ImageUrl" style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px; border-radius: 5px;" alt="product">
                                <div>
                                    <h6 class="my-0 text-truncate" style="max-width: 180px;">@item.ProductName</h6>
                                    <small class="text-muted">Количество: @item.Quantity бр.</small>
                                </div>
                            </div>
                            <span class="text-success fw-bold">@item.TotalPrice.ToString("C")</span>
                        </li>
                    }

                    <li class="list-group-item bg-transparent text-white border-secondary d-flex justify-content-between px-0 py-3">
                        <span>Доставка</span>
                        <span class="text-success">БЕЗПЛАТНА</span>
                    </li>

                    <li class="list-group-item bg-transparent text-white border-top border-secondary d-flex justify-content-between px-0 py-3 mt-2">
                        <strong class="fs-4">ОБЩО ЗА ПЛАЩАНЕ</strong>
                        <strong class="fs-4 text-success">@Model.TotalAmount.ToString("C")</strong>
                    </li>
                </ul>

                <div class="text-center mt-2">
                    <a asp-controller="Cart" asp-action="Index" class="text-muted text-decoration-none small">
                        <i class="fas fa-edit"></i> Редактирай количката
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}